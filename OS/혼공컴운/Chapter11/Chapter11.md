# Chapter 11

## CPU 스케줄링

### 프로세스 우선순위

* 우선순위가 높은 프로세스
  * 빨리 처리해야하는 프로세스
  * 일반적으로 입출력(I/O)작업이 많은 프로세스
    * Q) 왜 I/O 작업이 많으면 우선순위가 높은 걸까?
* 입출력 집중 프로세스 / CPU 집중 프로세스
  * 입출력 집중 프로세스 : 비디오 재생, 디스크 백업 작업과 같이 실행상태봗 입출력을 위해 대기상태에 더 많이 머무르는 것
  * CPU 집중 프로세스 : 컴파일, 그래픽 작업 담당과 같이 대기 상태보다 실행상태에 더 많이 머무르는 것
* CPU 버스트 / IO 버스트
  * CPU 버스트 : CPU를 이용하는 작업
  * I/O 버스트 : 입출력 장치를 <b> 기다리는 </b> 작업('대기 큐'에 머무르는 것)
* OS는 상황에 맞게 프로세스의 중요도에 따라 CPU를 이용할 수 있도록 우선순위를 부여
  * PCB 내에 우선순위 번호가 존재

### 스케줄링 큐

* OS가 모든 프로세스의 PCB 내 우선순위 번호를 확인하며 자원이용순서를 결정하는 것은 아니다. 
* OS가 각 자원(CPU, 메모리라는 작업을 할당, I/O 작업 등)에 대해 각각 줄을 세우는데 이것을 '<b>스케줄링 큐</b>'로 구현 및 관리한다.
  * 따라서 큐에는 다양한 종류가 존재
  * 1. 준비큐
       - CPU를 점유하고자 하는 프로세스가 줄을 선다.
       - 메모리 자원을 점유하고자 하는 프로세스가 줄을 선다.
    2. 대기큐
       - 입출력장치를 이용하기 위해 대기
       - 프린트 대기 큐, 하드 디스크 대기 큐, 프린터 대기 큐 등 다양
       - 입출력

### 선점형과 비선점형 스케줄링

* 선점형 스케줄링
  * CPU를 비롯한 자원을 사용하고 있더라도 OS가 자원을 강제로 빼앗아 타 프로세스에게 할당 가능한 스케줄링 기법
* 비선점형 스케줄링
  * CPU를 비롯한 자원을 특정 프로세스가 점유하고 있으면, 해당 프로세스가 종료되거나 스스로 대기큐에 들어가기 전까지 타 프로세스가 끼어들 수 없는 스케줄링 기법

---



## CPU 스케줄링 알고리즘



### 스케줄링 알고리즘의 종류

* ~~비선점형~~

  * FCFS
  * SJF
  * 우선순위 스케줄링
    * SJF, SRT는 넓은 의미에서 우선순위 스케줄링 개념에 포함됨. 
    * 기아현상(Stravation) 발생 가능
      * 준비 큐에 먼저 삽입되었음에도 불구하고 우선순위가 낮은 프로세스는 계속해서 CPU를 할당받지 못하고 실행이 연기되는 상태
    * 에이징으로 '기아현상' 방지 가능
      * 오래 대기한 프로세스의 우선순위를 점차 높이는 방식 

* ~~선점형~~

  * RR(라운드 로빈)

    * FCFS에 '타임 슬라이스'개념이 합쳐짐. 
    * 즉, 타임 슬라이스(정해진 시간)만큼만 기다리고 번갈아가며 CPU를 점유할 수 있다. 
    * 타임슬라이스가 지나치게 크면 FCFS와 비슷해지고, 지나치게 작으면 CPU가 프로세스를 처리하는 시간보다 Context Switching 비용이 더 발생가능
    * -> <b>Thrashing(쓰레싱)</b>

  * SRT(Shortest Remaining Time)

    * 프로세스가 정해진 타임슬라이스만큼 CPU를 점유하되, 다음 프로세스는 남아있는 작업시간이 가장 적은 프로세스로 선택

  * Mult-iLevel Queue 스케줄링(다단계 큐 스케줄링)

    * 우선순위 별로 준비 큐를 여러개 사용하는 스케줄링 방식
      * 프로세스들이 큐 사이를 이동불가. 
        * 각 큐에서 우선순위가 낮은 프로세스는 계속 연기될 수 있음. -> <b>기아현상 발생가능.</b>
      * 우선순위가 가장 높은 큐에 있는 프로세스를 가장먼저 처리하고 우선순위가 가장 높은 큐가 비어있으면 그 다음 우선순위의 큐에 있는 프로세스를 처리
      * 큐별로 타임슬라이스를 각각 적용가능하며, 큐마다 다른 스케줄링 알고리즘 적용가능

  * Multi-Level FeedBack Queue 스케줄링(다단계 피드백 큐 스케줄링)

    * 다단계 큐의 진화형식.

    * 프로세스들이 큐 사이를 이동 가능.

    * 예시

      >  새로 준비상태가 된 프로세스는 우선 우선순위가 가장 높은 우선순위 큐에 삽입되고 일정시간동안 실행된다. 
      >  그리고 만약 프로세스가 해당 큐에서 실행이 끝나지 않는다면 다음 우선 순위 큐에 삽입되어 실행된다. 
      >
      > 그리고 또 해당 큐에서 실행이 끝나지 않는다면 다음 큐에 삽입되고 결국 CPU를 오래 사용해야하는 프로세스는 점차 우선순위가 낮아진다. 

    * 낮은 우선순위 큐에서 너무 오래기다리고 있는 프로세스가 있다면 에이징 기법을 적용해 기아현상을 예방가능

    * CPU 이용시간이 길면 낮은 우선순위 큐로 이동시키고, 어떤 프로세스가 너무 오래 기다리면 높은 우선순위 큐로 이동 가능

    * 구현복잡하나 가장 일반적인 CPU 스케줄링 알고리즘

      

      

      

      

      



